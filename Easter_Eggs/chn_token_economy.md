中文版本 . TEA 代币经济设计
 
this document will be moved to website and docs when done
本文介绍了 TEA Project 的代币经济学设计. 关于 TEA Project 的基础技术介绍可以参考技术白皮书. 或者看下文中一个极简版本.
# Gist
TEA 有三种代币.
- TEA: TEA是代币的 Tick,可以简写成为 `T$`, 这是一种 Utility Token. 用于挖矿收益和服务费用.
- Credit: 是内部权益代币.不能离开 TEA Project之外进行流通和交易. 用于奖励长期诚信服务和违规惩罚. 这个数值是参与DAO 管理的投票权重也是征收地产税的依据.
- Headcount: 用于控制新增矿工节点的名额. 每个新增矿工窗口期的名额是有限的. 如果有更多矿工想加入就需要通过竞拍来获得矿工资格. 

这个经济系统的设计原则是为了

- 通过不可修改的宪法和可以修改的社区治理来兼顾早期参与者和后期参与者的利益, 使得项目可以在早期投资者获益的同时始终保持新陈代谢从而长期发展
- 打造一个合法的 Utility token,规避法律风险
- 自动调节流动性, 让投机和投资得到控制和收益并存

# TEA Project 的基础技术知识极简版本

TEA Project 是一个底层技术项目. 涉及的技术细节比较深奥. 有兴趣的可以去看技术白皮书. 在这里我们列出以可以读懂本文的代币经济学设计为目的的基础知识. 

TEA 是一个介于传统区块链和 dApp 之间的可信计算层. 它扩充了现有区块链的两个信任根: 共识和密码学, 增加了一个硬件信任根. 这样使得 dApp 可以把昂贵和复杂的计算从区块链上挪到 TEA 这个 Layer2 上. 从而提高效率降低成本, 完成了以前无法进行或者无法承担的计算工作而并没有丧失安全性. 大致可以认为是云计算的去中心化改进或者区块链的硬件加速器.

TEA project 中也包含一个区块链的底层叫 Layer1, 不过这个 layer1 不是运行 dApp 的智能合约, 而是运行对 Layer2 的安全审计. dApp 的计算逻辑(比如俗称智能合约)是跑在 Layer2 的可信计算硬件, 也就是矿工的矿机上的. 通过可信硬件和区块链的共识让矿工无法作恶, 从而实现可信安全和隐私保护的去中心化计算. 典型的例子包括 Defi 不再拥堵和昂贵, 区块链上跑人工智能和隐私计算等.

TEA project 除了底层基础链和二层协议之外, 还包括一些基础的金融应用, 比如钱包,交易所, 抵押铸币等. 更多的应用需要社区开发者逐步参与和支持开发.

因为本文主要专注在代币经济学设计. 至于为什么 TEA 可以做到可信, 请参考更加详细的 TEA 技术白皮书中的阐述.

# TEA: T$ Utility Token 
## T$ 的产生和分配

TEA是代币的 Tick,可以简写成为 `T$`, 这是一种 Utility Token.
它类似于 Ethereum 的 Gas. 它的作用是支付为客户或者系统内部公共服务消耗的成本. 这些成本包括计算存储和网络. 与常见的云计算计费类似.

### 获得 T$的方式


有以下方式可以获得 `T$`

- 矿工为用户提供可信计算服务获得用户支付的 gas
- 矿工为 TEA 内部的公共服务提供计算服务获得 layer1 增发的 TEA
- 任何人通过交易购买

### `T$`的总量和衰减
和 Credit 不同, `T$` 不会随时间衰减. 但是它的总量是固定的. 和 BTC 类似, 产量随时间递减最终收敛停止增发.

### `T$`的增发和产量递减
通过交易和为客户提供服务获得的 token 来自客户付出, 属于流通, 不是增发. 产生增发是由于 layer1 为公共服务在每个区块凭空增发的 token. 也是这种增发使得最初 Token 得以产生.
增发的数量遵循 BTC 的每四年减半的思路不过修改衰减速率和间隔成为每年衰减 20%. 即每过一年,产量速度为上一年的 80%.
第一年每个区块包含的 T$ 数量待定.

### 公共服务奖励和分配
公共服务是指维护系统可信而进行的节点安全审查, 出块, 代码维护和系统管理支出. 这些开销无法找到具体的支付对象, 获益者是全体社区. 所以定义为公共服务.
公共服务的开销通过每个区块凭空产生的新代币来根据 DAO 指定的分配标准进行分配. 在系统初期基本上是根据安全审查消耗的计算资源计费来进行分配. 比如说如果某个节点在前一个时间周期被选中进行了 100 次对其他节点进行的安全审(RA)那么它根据计费系统记录的消耗资源占比获得这个阶段产生的公共服务奖励等比奖励. 这个过程俗称挖矿.

随着时间的推移, 新区块增发的 T$数量逐渐减少. 当新增的 Token 不能满足公共服务分配需求的时候, 就通过下文会提到的地产税和拍卖计划生育指标来筹集.

在TEA 可以进行市场交易或者提供计算服务之前, 挖矿是唯一获得 TEA 的方式.

## T$的交易, 和 ERC20 的 Lock&Mint , Burn&Redeem 协议
`T$`是在 TEA 网络内部的代币. 自身不是发行在 Ethereum 上的 ERC20 代币. 因此不能直接转移到 ERC20 兼容的钱包或者交易所进行交易. 但是 TEA 提供了 Lock&Mint and Burn&Redeem Protocol 可以通过锁定 TEA Network 上的代币获得 1:1 等值的 ERC20 Token t.eth.这个代币是标准 ERC20 代币, 可以在任何支持 ERC20 的 Defi 系统上进行各种金融交易. 如果交易完毕希望赎回原先锁定的`T$`, 则需要进行一次 Burn 操作, 然后原先的 TEA 代币会返回. 除了交易费之外没有其他金融损失. 
同样的做法适用于其他支持智能合约和多签的区块链, 比如 Polkadot 的 t.dot token

## 未来 TEA 上面建立的各种 Defi 业务

TEA 属于一个区块链基础服务平台. 未来随着生态的开展, 上面一定会产生各种 Defi 应用. 这些 Defi 应用可以直接调用 TEA 提供的可信计算服务, 从而完成传统的区块链无法达到的高吞吐和低 Gas 费. 这些 Defi 因为是构建在 TEA 之上的, 因此就不需要进行 ERC20 转换即可直接处理. 如果需要处理 ERC20 兼容的外部代币,可以使用同样的Lock&Mint, Burn&Redeem的协议进行.

## T$是和计算成本锚定的稳定 Utility Token. 
TEA 主要的目的不是用于炒作和权益增值, 而是用于支付计算消耗的 Gas 代币. 计算定价类似于目前流行的云计算服务平台的计算方式, 基于计算量存储和网络. 因此从计算成本的角度上看是一个稳定币. 换言之如果一个计算任务需要 100 个 TEA 完成, 那么什么时候永远都是 100 个 TEA, 除非计算算法改进使得成本降低, 那么可能变成 70 个 TEA 完成同样的计算任务.
根据目前的理解, 这种类型的 Utility Token 不存在违法的嫌疑.

## T$可能的价格波动
无论是否是 Utility Token. 任何存在稀缺性的可以交易的物品都会因为供需条件的变化产生价格波动. 基于安全性考虑, 我们会通过控制 Headcount 来避免突然涌入的大量的来不及安全审查的矿工节点突破 BFT 的容错极限. 所以有可能在短时间造成交易排队. 当交易排队发生的时候一方面客户需要提高消费 Tip 来吸引矿工进行优先处理; 另一方面会有更多矿工涌入希望竞拍获得 Headcount 加入挖矿. 这样有可能推到 T$ 的交易价格. 这种波动会随着以下各种情况回归稳定:

- 一些做市商通过杠杆调节使用借贷方式增加 T$ 的供应量
- 一些低效节点升级提高计算能力或者沉睡节点被唤醒加入挖矿分散积压的任务
- 随着新矿工加入开始分散计算积压任务

反之当市场走低, 没有大量任务提交的时候, 矿工任务会减少. T$价格下降. 有一些矿工的收入会无法抵过维护成本. 他们会选择弃租虚拟机从而退出挖矿. 退出挖矿的 Headcount 不会保留, 而是销毁. 所以做出退出选择的矿工在未来市场变热重新加入的时候仍然需要通过拍卖 Headcount 获得资格. 

## 矿工的成本

矿工的成本包括

- 矿机的购买或者租赁
- 电力和网络开销
- 支付安全审计的开销

因为 TEA 使用可信计算技术. 矿工需要自备或者租用矿机进行挖矿. 初步阶段, 只有 Amazon Nitro 可信虚拟机是认可的矿机. 未来我们会开发各种类型的矿机符合分散风险的要求. 这些不同构架的矿机包括

- 基于 TPM 的独立硬件矿机
- Google 基于 AMD Enclave 技术的虚拟矿机
- Microsoft 基于 Intel Enclave 技术的虚拟矿机

与 POW 类型的挖矿需要大量算力不同, TEA 基本上没有太多的电力消耗. 对硬件要求也不高. 属于绿色挖矿类型. 所以这方面的开销基本上可以忽略.

因为 TEA 要求对所有有资格进行计算的节点进行不间断的随机的不可逃避的安全审计. 只要机器在待命状态, 就有可能被审计. 被审计是需要支付审计方的费用. 如果不能支付或者审计失败则会被认为不再安全, 从而被剥夺参与挖矿的资格.并处罚金, 甚至严重的丢失全部 Credit 后开除出网络.

在网络运行初期, 系统随着新区块增发的新 T$ 基本上可以全部 cover 这些审计费用, 因此矿工不需要单独支付. 但是随着节点数量增加和增发的 Token 减少, 这部分成本会逐步转移到矿工自身支付. 

如果市场变差, 矿工获得的任务收益还不足以支付它的日常开销的时候, 可以选择退出挖矿. 这样竞争会减少, 单个矿工的收益会增加, 从而实现自动调节市场平衡的作用. 矿工离场后原有的 Headcount 会销毁. 原来的 Credit 可以转让和卖掉. 如果保留在原有账号上就需要继续支付地产税. 如果这个矿工在市场转好重新进入挖矿, 就需要经历竞拍 Headcount 的过程, 而且新账号的 Credit 不能自动从旧账号转入. 当然可以通过一个交易转入.

关于地产税的概念在 Credit 的章节详细介绍

# Credit

Credit 在 TEA 网络内部是一个权益币. 它的存在有以下的目的

- 作为投票权重参与 DAO 治理
- 作为长期诚实提供可信计算服务的奖励
- 作为征收地产税的权重依据

## Credit 不是 Utility Token
Credit 没有绝对数值意义. 也就是说一个 Credit 不能 peg 到任何实体价值上. 这一点和 T$ peg 计算消耗成本不同.
Credit 只有相对意义. 也就是你的账号上的 Credit 占 Total Credit 的比例.或者你的 Credit 和你的竞争对手的 Credit 的高低对比. 
Credit 不能离开 TEA Network 在外部的交易所进行交易. 我们也不会提供直接的Lock&Mint的方式映射到一个 ERC20 token. 当然, 我们无法禁止其他人这样做. 

## Credit 的获得
Credit 的获得方式包括

- 为客户提供计算服务, 获得 TEA gas 的同时系统凭空增发等数量的 Credit 给这个矿工
- 为系统公共服务提供计算服务, 获得 TEA 增发奖励的同时, 获得等值的 Credit
- 在 TEA Network 系统内部可以进行交易和转让

## Credit 随时间衰变

Credit 不是 Utility Token. 它的绝对数值没有意义. 为了抵消系统不断新增 Credit 带来的数字越来越大的问题. 我们设计 Credit 随着时间(区块高度)按照指数函数衰变
换言之, 所有人账号上的 Credit 在没有进出交易的情况下, 也会随着时间不断减少数量. 这个减少的快慢程度使用衰变率 Decay 来计算.


## Credit 的衰变公式

衰变公式是这样定义的.

假设用户在快高度为 h_0的块中获得了 v_0 个 Credit. 那么经过了 k 个区块后的高度为 h_k 的时候, 他的账上 credit 数值变成
` v_k = v_0 * (1 - decay_rate).pow(h_k - h_0) `


## Decay_rate 衰变率的确定

在创始区块存在一个初始 decay_rate 衰变率.  这个衰变率未来可以通过 DAO 投票来修改. 为了避免马太效应, 让这些已经持有 credit 的人出于自身利益不断减少 decay_rate 因而损害新加入的新矿工的利益. 我们 hard coded 这个 decay_rate 只能增加而不能减少. 这个属于不可以改变的区块链宪法. 


## 投票权和地产税

Credit 的一个重要的作用就是在 DAO 治理中的话语权. DAO 投票的时候 Credit 是作为权重产生的. Credit 的另外一个作用是获得任务的机会加权. 
有权益就有响应的付出. 这个付出就是地产税 Propert_tax

虽然公共服务在最开始是通过增发 `T$` 来覆盖成本, 但是随着时间推进, 增发量逐年递减, 而可能的公共服务支出应该会不断增加(比如说节点增加造成安全审计工作量增加). 这些不足以支付的成本将由征收地产税来弥补.
任何拥有 Credit 的账号都会按照其 Credit 数量占全网 Credit 的数额分摊这部分支出. 
如果 Credit 的用户的 T$余额不足以支出这个财产税, 那么会经过如下的清算过程:

- Credit 拿去拍卖. 或者由他人购买 Credit 来代替偿还欠税
- 如果 Credit 拍卖后仍然不足以支付欠税. 这个账号会被清空并销号. 

由于清算不足以支付税款造成的亏空赤子在下一个征税周期一并从目前仍然活跃的用户分摊支付.

## 加持和减持 Credit 的金融考量

持有 Credit 的好处在于

- 高 Credit 享有更高的获得计算任务从而得到 Gas 收益的机会. 我们的任务分配算法中 Credit 是一个最重要的权重参数
- Credit 在社区 DAO 治理中的话语权
- Credit 是有投资增值空间的. 

减持 Credit 的好处在于

- 减少税收
- 如果 DAO 投票决定增加衰减率. 减少随时间衰减的损失
- 变现获益离场 

## Credit 的增值空间假设

当 Decay_rate 比较低的时候. 新用户通过计算任务或者的 Credit 数量相对于老用户随时间 delay 更小. 因此老用户会容易保持对新用户的高 Credit 优势, 从而增加了其盈利能力. 就是说更容易挣到钱. 对于新用户来说, 如果有信心, 有意愿通过购买老用户的 Credit 从而增加盈利能力. 这样老用户可以通过卖出 Credit 获得收益. 

由于宪法规定 decay_rate 只可以通过投票增加但是不可以减少. 所以对于老用户来说, 通常不会愿意投票通过增加 delay_rate 的决议. 除非当新用户很少加入, 没有人购买他们现有的 credit 的时候, 也许会通过决议提高 decay_rate. 但是一旦提高就不能降低. 因此有可能长期看起来 decay 是一个加快的趋势. 那么对于刺激新用户淘汰老用户加快新陈代谢是有利的. 当然, 这些都是持币人自己的决定. 

# Headcount 和计划生育

## 目的

通过控制新节点涌入的速度来避免来不及进行安全审核, 尤其是新平台的安全审计存在漏洞带来的 BFT 共识容错底线被突破的风险. 在客观上也造成了一定程度的稀缺性. 为金融投机提供了可能性

## Headcount 的数值计算系数 Birth_rate

在任意一个给定时刻, 新区块里面允许增加的新矿工节点的数量叫做 Headcount. 其计算方法是 

` Headcount = math::round::ceil(total_head_count * (1 + birth_rate))`

在创始区块中有一个初始的 birth_rate, 未来可以通过一个算法来自动调节. 类似于 BTC 自动调节的难度系数. 不过 TEA 的出生率条件是根据任务拥塞程度来调节. 如果任务很少, 大量节点处于等待状态, 则说明市场不旺, 需要降低出生率避免恶性竞争. 如果任务很多, 甚至产生积压排队, 就需要提高出生率招募更多矿工来分摊任务和公共服务成本.

因为出块间隔比较短, 现在是 6s, 所以不是每个区块都允许有 Headcount 的. 目前预计是每隔 128 个区块(约 12 分钟)有一个窗口机会允许增加Headcount 个新矿工加入. 

## 获得 Headcount 的竞争

当有超过 Headcount 数量的矿工希望加入挖矿. 那么就需要通过竞拍获得资格. 竞拍使用的货币是 T$. 每次窗口出现的时候出价最高的 Headcount 个矿工会获得机会加入挖矿. 没有获得机会的等待着继续竞拍下一个窗口期.

如果没有足够的竞争者参与, 那么空余的 Headcount 会作废, 不会顺延到下一个窗口期. 这种情况下很可能不需要花钱就可以加入挖矿.

拍卖获得的收益用于支付公共服务支出.

## 转让和购买 Headcount
对于已经处于活跃状态下的矿工可以把自己的 Headcount 转售给希望加入的新矿工. 价格由市场价格决定. 不过如果一个矿工已经由于自愿退出或者因为安全审计失败被开除从而失去活跃矿工资格的矿工会失去自己的 Headcount, 当然也就不能销售了. 对于资源退出的矿工, 他的 Credit 仍然存在, 可以销售,也需要缴税. 对于安全审计失败而被开除的矿工, Credit 被没收为 0, 所以也没有可以卖的 Credit 了.

由于 Credit 可以在内部转让, 所以新矿工可以一并购买老矿工的 Credit, 或者从其他矿工购买 Credit 从而获得一个比较好的初始 Credit. 当然, 也可以不购买, 自己慢慢积累.




# 预售和融资

目前 TEA 项目已经完成了基础技术的研究和演示版本的开发. 准备进入正式产品和代币经济的开发. 为了完成这部分的工作需要进行快速融资.

目前考虑的融资手段是预售 Headcount. 

这些 Headcount 的用户会在主网上线的时候开始预挖矿. 在预挖矿期间, 只有这些参与预售的矿机有权进入采矿. 这个阶段属于积累 credit 和 TEA token 的时期. 在这个期间交易的部分还在开发过程, 所以还不能交易.

等到预挖矿阶段结束, 对外公开的时间节点就是所有基础金融服务都完成的时间. 其他矿工可以通过竞拍 Headcount 加入采矿行业. 已经挖出的 TEA 也可以在 Uniswap 等 DEX 进行正式交易. 对于已经在挖矿的 Presale 的矿工这时候也可以销售自己的 Headcount 给这时候才知道参与的新矿工. 这些交易都是需要在这个节点之前就完成的基本金融服务功能.

## 预售的资金使用和去向

预售的资金用于立即开始一直到主网上线期间的产品开发费用. 如果有剩余部分. 会转入 DAO 管理用于支付未来的维护费用. 用 DAO 的投票机制管理. 这些资金不属于任何个人和基金会. 

## 预售的买家得到了什么

预售的购买者得到的是 Headcount. 就是一个账号和私钥. 这个私钥需要自己保存好. 没有任何人知道你的私钥. 你的公钥就是矿工账号. 在预挖矿开始的时候, 拥有这些账号的矿工可以租用或者自建矿机开始挖矿. 这期间还没有完成交易所等金融服务应用, 所以只能挖矿, 不能买卖. 这个期间属于积累 credit 和 TEAtoken的时段. 因为这时候刚刚开始出矿, 还没有达到产量缩减, 也没有对外公开挖矿, 只有预售的矿工可以参与. 相对来说竞争小,  收益高, 但是 TEA token 还不能交易, 也没有市场价格.

## 预售的买家的未来可能收益

预售的买家率先获得 Credit 和预挖的 T$. 从猪王上线开始, 这些矿工就有权出售自己的 T$或者 Credit 还有 Headcount. 当然, 我们更鼓励长期持有. 因为在未来任何时候都可以在市场价格更满意的时候售出. 毕竟未来挖矿的难度肯定是越来越大, 产量越来越低. 最初获得的 Credit 在未来的竞争中很容易处于优势地位.

# 平台开发者的权益

平台开发者已经投入的成本都作为 IOU 的方式在预售期间折算成为 Headcount. 折算价格按照预售公布价格, 或者平均价格(假如存在多个批次价格不同的话). 在主网上线可以交易之前, 这些 Headcount 也不能交易. 这一点和其他预售参与者是一样的.

平台开发者在获得 funding 之后的工作可以选择拿工资或者部分工资部分权益的方式. 作为部分权益就是相当于 Convertible Notes 的方式. 根据时间点拿到一个折扣价格, 在未来可以从 DAO 管理的开发资金中购买TEA token. 

平台开发者自身也可以成为矿工. 和其他人待遇一样.

平台开发者如果退出项目, 那么已经支付的工资和 Headcount 继续保持. 但是 Convertible Notes 就自行放弃了.

# 平台基础应用开发者的权益

基础的金融服务 DApp 定义为平台基础应用. 这里面包括但是不限于

- 钱包 Gluonwallet
- Lock&Mint, Burn&Redeem 协议
- 内部的 DEX 交易所

这些应用自身可以收取服务器, 但是在启动初期仍然按照平台开发的一部分算入平台开发成本中. 主网上线以后脱离开成为独立的应用, 自负盈亏, 参与其他 dApp 的竞争.

# 预售融资平台

未知

# DAO 管理

采用和其他 Defi DAO 类似的方式进行社区治理. Credit 是权益币. 是投票的权重币. 也是税收的依据.

